<!DOCTYPE html>
<html lang='en'>
<head>
  <!-- meta data -->
  <meta charset="UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="For my third Arduino project, I made a bluetooth tune speaker thing :P...">
  <meta name="keywords" content="Game Development, Portfolio, 3D, Programmer, Code, Software">
  <meta name="author" content="Nazaire Shabazz">

  <meta property="og:title" content="IGME 470 Third Project - Nazaire Shabazz"/>
  <meta property="og:description" content="For my third Arduino project, I made a bluetooth tune speaker thing :P..."/>
  <meta property="og:type" content="website"/>
  <meta property="og:url" content="http://nqshabazz.com/igme-470-third-project"/>
  <meta property="og:image" content="http://nqshabazz.com/../assets/images/igme-470-third-project/top-image.jpg"/>
  <meta property="og:locale:alternate" content="es_ES"/>
  
  <meta property="fb:app_id" content="966242223397117"/>

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@nqshabazz">
  <meta name="twitter:creator" content="@nqshabazz">
  <meta name="twitter:title" content="IGME 470 Third Project - Nazaire Shabazz">
  <meta name="twitter:description" content="For my third Arduino project, I made a bluetooth tune speaker thing :P..."/>
  <meta name="twitter:image" content="http://nqshabazz.com/../assets/images/igme-470-third-project/top-image.jpg">

  <!-- meta links -->
  <link rel="publisher" href="https://plus.google.com/u/0/111346714509241869686"/>
  <link rel="canonical" href="/"/>
  <link rel="shortcut icon" type="image/png" href="../assets/images/favicon.png"/>
  
  <!-- title -->
  <title>IGME 470 Third Project - Nazaire Shabazz</title>
  
  <!--Bootstrap CSS content delivery network-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
  
  <!--jQuery JS content delivery network-->
  <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  
  <!--Tether JS content delivery network (for Bootstrap code highlighting)-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
  
  <!--Bootstrap JS content delivery network-->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
  
  <!--FontAwesome CSS content delivery network-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  
  <!--Google Font Open Sans Font-Family-->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  
  <!--my css-->
  <link rel="stylesheet" href="../assets/css/style-default.css">
  
  <script>
    $(window).on('load',function(){
      $('[data-toggle="popover"]').popover();
    });
  </script>
</head>
<body>
  <nav id='topbar' role="navigation">
    <a href='../'>
      <img alt="my logo" src="..//assets/images/header-image.png"/>
      <span class="sr-only">To Home</span>
    </a>
  </nav>
  <div id="topOfPage"></div>
  <a class="fa fa-2x fa-chevron-up text-white" id="toTopButton" href="#topOfPage"></a>
  <main id="post-page">
    <article id='blog-post' class='m-auto'>
      <h1 class="default-box" id="front-page-introduction">IGME 470 Third Project</h1>
      <p class="text-muted">
        by Nazaire Shabazz | <time datetime="2018-04-12T18:07:48-04:00" title="4/12/18 06:07:48 pm">4/12/18 06:07:48 pm</time>
      </p>
      <p id="post-tags">
        <a class='badge badge-default' href='../#igme470'>igme470</a><a class='badge badge-default' href='../#arduino'>arduino</a><a class='badge badge-default' href='../#.2018'>.2018</a><a class='badge badge-default' href='../#.april'>.april</a>      </p>
      <hr class="default-box" id="front-page-loading-bar" />
      <img src="../assets/images/igme-470-third-project/top-image.jpg"/>
      <div id="content-container" class="bg-faded">
        <p>For my third Arduino project, I made a bluetooth tune speaker thing :P</p>
        
        <iframe style="width: 100%; height: calc(50vw * 0.5625); min-height: 300px;" src="https://www.youtube.com/embed/OD3gRXR-rJc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        
        <p>For this project we were tasked to make use of the speaker and microphone components of the Arduino.</p>
        
        <p>There was a bit less rush, but I way overscoped nonetheless X). At first I wanted to make a project wherein the Arduino would record the user's voice, send it over bluetooth to a phone app, then have the phone app send data back to the Arduino to play over the speakers.</p>
        
        <p>Part of the reason this didn't work is because I left my microphone component somewhere with the class' components. Another reason is because I could not figure out how to make a homemade app interface with Arduino over bluetooth. So I cut out the recorder part and made due with an Arduino bluetooth app in the app store.</p>
        
        <img src="../assets/images/igme-470-third-project/screenshot.png"/>
        
        <p>A recurring theme with Arduino seems to be that there's little to no code at all! It was super simple to set up Bluetooth - basically it acts as a Serial device just like the basic Arduino. Characters received from the Bluetooth can be parsed by their decimal values.</p>
        
        <p>The speaker was also pretty easy to use: there is a built-in tone library for arduino that allows you to play basic sounds with one line. I combined that with the "arduino bluetooth controller" app to make a simple tone player and recorder. The app would send a command over bluetooth for the Arduino to interpret and act upon.</p>
        
        <p>Here's what I wrote:</p>
        
        <a class="btn btn-primary btn-lg text-white" id="mainCodeHeading" data-toggle="collapse" data-target="#mainCode" aria-expanded="false" aria-controls="mainCode">+ main.ino</a>
        <div id="mainCode" class="collapse" aria-labelledby="mainCodeHeading">
          <code>
            <pre class="card card-body">
            
              String data;
              int melody,difference,recordingIndex,speakerPin,
              recordTimer, playingIndex, playTimer, timeStamp, delta;
              bool recording, playing;

              int recordArray[16];

              void setup(){
                Serial.begin(9600);

                Serial.write("AT+NAMEARDUINOPLEASE");
                recording=false;
                playing=false;
                speakerPin=8;
                melody=32;
              }

              void loop(){
                delta=millis()-timeStamp;
                timeStamp=millis();

                while(Serial.available()>0){
                  data+=Serial.read();
                }

                if(data.length()>0){
                  if(data=="48"){
                    //box
                    melody=32;
                    doStuff();
                    Serial.println("48");
                  }else if(data=="49"){
                    //tri
                    melody=41;
                    doStuff();
                    Serial.println("49");
                  }else if(data=="50"){
                    //cross
                    melody=52;
                    doStuff();
                    Serial.println("50");
                  }else if(data=="51"){
                    //circle
                    melody=62;
                    doStuff();
                    Serial.println("51");
                  }else if(data=="52"){
                    //up
                    difference=0;
                    doStuff();
                    Serial.println("52");
                  }else if(data=="53"){
                    //down
                    difference=200;
                    doStuff();
                    Serial.println("53");
                  }else if(data=="54"){
                    //left
                    difference=400;
                    doStuff();
                    Serial.println("54");
                  }else if(data=="55"){
                    //right
                    difference=800;
                    doStuff();
                    Serial.println("55");
                  }else if(data=="56"){
                    //select
                    playing=false;
                    recording=!recording;
                    recordingIndex=0;
                    recordTimer=0;

                    if(recording){
                      for(int i=0; i<16; i++){
                        recordArray[i]=0;
                      }
                    }

                    noTone(speakerPin);
                    Serial.println("56");
                  }else if(data=="57"){
                    //start
                    recording=false;
                    playing=!playing;
                    playingIndex=0;
                    playTimer=0;

                    if(playing){
                      tone(speakerPin,recordArray[0],recordArray[1]);
                    }else{
                      noTone(speakerPin);
                    }

                    Serial.println("57");
                  }

                  data="";
                }

                if(recording){
                  recordTimer+=delta;
                }

                if(playing){
                  playTimer+=delta;

                  if(playTimer>recordArray[playingIndex+1]+5){        
                    if(playingIndex==16){
                      playing=false;
                      noTone(speakerPin);
                    }

                    playingIndex+=2;

                    if(playingIndex<16)
                      tone(speakerPin,recordArray[playingIndex],recordArray[playingIndex+1]);

                    playTimer=0;
                  }
                }
              }

              void doStuff(){

                    if(!playing){
                      tone(speakerPin,melody+difference);
                    }

                    if(recording){
                      if(recordingIndex>0){
                        recordArray[recordingIndex]=recordTimer;
                        recordingIndex++;
                      }

                      if(recordingIndex<16){
                        recordTimer=0;
                        recordArray[recordingIndex]=melody+difference;
                        recordingIndex+=1;
                      }else{
                        recording=false;
                      }
                    }
              }
            </pre>
          </code>
        </div>
      </div>
            <address class="bg-faded">
        questions / suggestions? Get in touch:
        <p>
          <a href="https://twitter.com/nqshabazz" rel="nofollow" target="_blank" ><span class="fa fa-twitter"></span> @nqshabazz</a> |
          <a href="mailto:nqshabazz@gmail.com">nqshabazz@gmail.com</a>
        </p>
      </address>
      <div id="disqus_thread"></div>
      <script>
        /**
         *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
         *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
         */
        /*
        var disqus_config = function () {
            this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        };
        */
        (function() {  // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');

            s.src = 'https://nqshabazz.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>      <script>
        
      </script>
    </article>
  </main>
  <footer class='footer'>
    <p id="social-media-footer">
      <a class='fa fa-2x fa-twitter' href="https://twitter.com/nqshabazz" rel="nofollow" target="_blank" data-toggle="popover" data-trigger="hover" data-placement="top" data-content="Twitter"><span class="sr-only">Twitter</span></a>
      <a class='fa fa-2x fa-youtube-play' href="https://www.youtube.com/channel/UCwlgvHxHkWjNCsCm9byUEUg" rel="nofollow" target="_blank" data-toggle="popover" data-trigger="hover" data-placement="top" data-content="YouTube"><span class="sr-only">YouTube</span></a>
      <a class='fa fa-2x fa-github-alt' href="https://github.com/nqshabazz" rel="nofollow" target="_blank" data-toggle="popover" data-trigger="hover" data-placement="top" data-content="Github"><span class="sr-only">Github</span></a>
      <a class='fa fa-2x fa-linkedin' href="https://www.linkedin.com/in/nqshabazz/" rel="nofollow" target="_blank" data-toggle="popover" data-trigger="hover" data-placement="top" data-content="LinkedIn"><span class="sr-only">LinkedIn</span></a>
      <a class='fa fa-2x fa-envelope' href='mailto:nqshabazz@gmail.com' data-toggle="popover" data-trigger="hover" data-placement="top" data-content="nqshabazz@gmail.com"><span class="sr-only">Email</span></a>
    </p>
    <p>&copy; Nazaire Shabazz 2017</p>
  </footer>
  <script>
    document.body.classList.add("loaded");
    
    window.onload = function(){
      let anchorArray = document.getElementsByTagName("a");
      var index = anchorArray.length;

      while(index--){
        let anchorTarget = anchorArray[index].getAttribute("href");
        
        if(anchorTarget.startsWith("#")){
          let anch = anchorArray[index];
          
          anch.addEventListener("click", function(event) {
            event.preventDefault();
            smoothScroll(anchorTarget.substring(1));
          });
        }
      }

      if (location.hash) {
        setTimeout(function() {
          window.scrollTo(0, 0);
          smoothScroll(location.hash.substring(1))
        }, 1);
      }
    };
    
    function smoothScroll(target){
      let elem = document.getElementById(target);
      
      if(elem)
        $('html, body').animate({scrollTop: elem.offsetTop}, 750);
    }
  </script>
</body>
</html>